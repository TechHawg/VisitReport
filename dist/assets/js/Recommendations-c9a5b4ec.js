import{u as e,j as t,S as a,P as s,a as l,B as r,M as n,I as i,A as o,E as d,C as c}from"./pages-heavy-0f77b7b7.js";import{r as m}from"./react-vendor-573427e5.js";import{T as x}from"../index-bcad4793.js";import{B as g,z as p,b as u,M as h,k as j,T as v,p as y,G as b}from"./icons-260eb673.js";const f=()=>{const{reportData:f,updateReportData:N,addNotification:k}=e(),[C,w]=m.useState(null),[R,I]=m.useState(null),[T,$]=m.useState(!1),[E,S]=m.useState("all"),[z,P]=m.useState("all"),A=f.recommendations||[],D=e=>{N("recommendations",e)},O=[{value:"critical",label:"Critical",color:"red"},{value:"high",label:"High",color:"orange"},{value:"medium",label:"Medium",color:"yellow"},{value:"low",label:"Low",color:"blue"}],B=[{value:"proposed",label:"Proposed",color:"blue"},{value:"approved",label:"Approved",color:"green"},{value:"in-progress",label:"In Progress",color:"yellow"},{value:"completed",label:"Completed",color:"green"},{value:"rejected",label:"Rejected",color:"red"},{value:"deferred",label:"Deferred",color:"gray"}],M=()=>{w({id:Date.now(),title:"",description:"",category:"",priority:"medium",status:"proposed",justification:"",expectedBenefit:"",estimatedCost:"",timeframe:"",assignedTo:"",dateProposed:(new Date).toISOString().split("T")[0],dateImplemented:"",implementationNotes:"",roi:"",notes:""})},U=()=>{if(0===A.length)return 100;const e=A.filter(e=>"completed"===e.status).length;return Math.round(e/A.length*100)},L=e=>{const t={critical:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",high:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",low:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"};return t[e]||t.medium},H=e=>{const t={proposed:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",approved:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300","in-progress":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",completed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",rejected:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",deferred:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return t[e]||t.proposed},W=e=>{const a={proposed:t.jsx(y,{size:16}),approved:t.jsx(b,{size:16}),"in-progress":t.jsx(y,{size:16}),completed:t.jsx(b,{size:16}),rejected:t.jsx(y,{size:16}),deferred:t.jsx(y,{size:16})};return a[e]||a.proposed},q=A.filter(e=>{const t="all"===E||e.status===E,a="all"===z||e.priority===z;return t&&a}),F=U();return t.jsxs("div",{className:"space-y-6",children:[t.jsx(a,{title:"Implementation Progress",icon:t.jsx(g,{className:"text-blue-500"}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(s,{progress:F,label:"Recommendations Implementation Rate",color:F>=80?"green":F>=50?"blue":"yellow",size:"lg"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:A.length}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Recommendations"})]}),t.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:A.filter(e=>"proposed"===e.status).length}),t.jsx("p",{className:"text-xs text-blue-500 dark:text-blue-400",children:"Proposed"})]}),t.jsxs("div",{className:"text-center p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:A.filter(e=>"approved"===e.status||"in-progress"===e.status).length}),t.jsx("p",{className:"text-xs text-yellow-500 dark:text-yellow-400",children:"In Progress"})]}),t.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:A.filter(e=>"completed"===e.status).length}),t.jsx("p",{className:"text-xs text-green-500 dark:text-green-400",children:"Completed"})]})]})]})}),t.jsx(a,{title:"Recommendations & Improvements",icon:t.jsx(p,{className:"text-indigo-500"}),helpText:"Track and manage improvement recommendations for the office environment.",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 justify-between items-center",children:[t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs(l,{value:E,onChange:e=>S(e.target.value),className:"w-auto",children:[t.jsx("option",{value:"all",children:"All Statuses"}),B.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]}),t.jsxs(l,{value:z,onChange:e=>P(e.target.value),className:"w-auto",children:[t.jsx("option",{value:"all",children:"All Priorities"}),O.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs(r,{onClick:M,size:"sm",children:[t.jsx(u,{size:16}),"Add Recommendation"]}),t.jsxs(r,{onClick:()=>$(!0),variant:"outline",size:"sm",disabled:0===A.length,children:[t.jsx(h,{size:16}),"Email Report"]})]})]}),q.length>0?t.jsx("div",{className:"space-y-4",children:q.map(e=>t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-600 shadow-sm",children:t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 text-lg",children:e.title}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L(e.priority)}`,children:e.priority.toUpperCase()}),t.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${H(e.status)}`,children:[W(e.status),e.status.replace("-"," ").toUpperCase()]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Category:"}),t.jsx("span",{className:"ml-1 text-gray-900 dark:text-gray-100",children:e.category||"Not specified"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Proposed:"}),t.jsx("span",{className:"ml-1 text-gray-900 dark:text-gray-100",children:e.dateProposed})]}),e.timeframe&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Timeframe:"}),t.jsx("span",{className:"ml-1 text-gray-900 dark:text-gray-100",children:e.timeframe})]}),e.estimatedCost&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Cost:"}),t.jsx("span",{className:"ml-1 text-gray-900 dark:text-gray-100",children:e.estimatedCost})]})]}),e.description&&t.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:e.description}),e.expectedBenefit&&t.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 mb-3",children:t.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[t.jsx("strong",{children:"Expected Benefit:"})," ",e.expectedBenefit]})}),e.implementationNotes&&t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 mb-3",children:[t.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[t.jsx("strong",{children:"Implementation Notes:"})," ",e.implementationNotes]}),e.dateImplemented&&t.jsxs("p",{className:"text-xs text-green-600 dark:text-green-300 mt-1",children:["Implemented on: ",e.dateImplemented]})]})]}),t.jsxs("div",{className:"ml-4 flex space-x-2",children:[t.jsx(r,{size:"sm",variant:"outline",onClick:()=>(e=>{w({...e})})(e),children:t.jsx(j,{size:16})}),t.jsx(r,{size:"sm",variant:"danger",onClick:()=>I(e),children:t.jsx(v,{size:16})})]})]})},e.id))}):t.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[t.jsx(p,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-medium mb-2",children:"all"!==E||"all"!==z?"No recommendations match the current filters":"No recommendations created yet"}),t.jsx("p",{className:"text-sm mb-4",children:"all"!==E||"all"!==z?"Try adjusting your filters to see more recommendations":"Start documenting improvement recommendations for the office"}),t.jsxs(r,{onClick:M,children:[t.jsx(u,{size:16}),"Add First Recommendation"]})]})]})}),t.jsxs(n,{isOpen:!!C,onClose:()=>w(null),title:(C?.id&&A.find(e=>e.id===C.id)?"Edit":"Add")+" Recommendation",size:"xl",children:[C&&t.jsxs("div",{className:"space-y-4",children:[t.jsx(i,{label:"Recommendation Title *",value:C.title,onChange:e=>w({...C,title:e.target.value}),placeholder:"Enter a descriptive title for the recommendation",required:!0}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs(l,{label:"Category",value:C.category,onChange:e=>w({...C,category:e.target.value}),children:[t.jsx("option",{value:"",children:"Select Category"}),["Security Enhancement","Performance Improvement","Hardware Upgrade","Software Update","Network Optimization","User Training","Process Improvement","Cost Reduction","Compliance","Backup & Recovery","Documentation","Other"].map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx(l,{label:"Priority",value:C.priority,onChange:e=>w({...C,priority:e.target.value}),children:O.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(l,{label:"Status",value:C.status,onChange:e=>w({...C,status:e.target.value}),children:B.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),t.jsx(i,{label:"Timeframe",value:C.timeframe,onChange:e=>w({...C,timeframe:e.target.value}),placeholder:"e.g., 30 days, Q2 2024, etc."})]}),t.jsx(x,{label:"Description",value:C.description,onChange:e=>w({...C,description:e.target.value}),placeholder:"Detailed description of the recommendation...",rows:3}),t.jsx(x,{label:"Justification",value:C.justification,onChange:e=>w({...C,justification:e.target.value}),placeholder:"Why is this recommendation important?",rows:2}),t.jsx(x,{label:"Expected Benefit",value:C.expectedBenefit,onChange:e=>w({...C,expectedBenefit:e.target.value}),placeholder:"What benefits will this provide?",rows:2}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(i,{label:"Estimated Cost",value:C.estimatedCost,onChange:e=>w({...C,estimatedCost:e.target.value}),placeholder:"$5,000, $500/month, etc."}),t.jsx(i,{label:"ROI",value:C.roi,onChange:e=>w({...C,roi:e.target.value}),placeholder:"Expected return on investment"})]}),t.jsx(i,{label:"Assigned To",value:C.assignedTo,onChange:e=>w({...C,assignedTo:e.target.value}),placeholder:"Who is responsible for implementation?"}),"completed"===C.status&&t.jsxs(t.Fragment,{children:[t.jsx(x,{label:"Implementation Notes",value:C.implementationNotes,onChange:e=>w({...C,implementationNotes:e.target.value}),placeholder:"How was this recommendation implemented?",rows:3}),t.jsx(i,{label:"Date Implemented",type:"date",value:C.dateImplemented,onChange:e=>w({...C,dateImplemented:e.target.value})})]}),t.jsx(x,{label:"Additional Notes",value:C.notes,onChange:e=>w({...C,notes:e.target.value}),placeholder:"Any additional notes or observations...",rows:2})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[t.jsx(r,{variant:"outline",onClick:()=>w(null),children:"Cancel"}),t.jsx(r,{onClick:()=>{if(!C.title.trim())return void k({type:"error",message:"Recommendation title is required",duration:3e3});let e;e=C.id&&A.find(e=>e.id===C.id)?A.map(e=>e.id===C.id?C:e):[...A,{...C,id:Date.now()}],D(e),w(null),k({type:"success",message:"Recommendation saved successfully",duration:3e3})},children:"Save Recommendation"})]})]}),t.jsx(n,{isOpen:T,onClose:()=>$(!1),title:"Email Recommendations Report",size:"lg",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs(o,{variant:"info",children:[t.jsx("strong",{children:"Email Recipients:"}),t.jsx("br",{}),(d.recommendations||d.default).join(", ")]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Report Summary:"}),t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[t.jsxs("div",{children:["Total Recommendations: ",A.length]}),t.jsxs("div",{children:["Critical Priority: ",A.filter(e=>"critical"===e.priority).length]}),t.jsxs("div",{children:["Approved: ",A.filter(e=>"approved"===e.status).length]}),t.jsxs("div",{children:["Implementation Progress: ",F,"%"]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx(r,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),t.jsxs(r,{onClick:()=>{const{mailtoLink:e}=(()=>{const e=f.office||"Office Visit",t=f.date||(new Date).toISOString().split("T")[0],a=`Recommendations Report - ${e} - ${t}`;let s="Recommendations & Improvements Report\n";s+=`Office: ${e}\n`,s+=`Date: ${t}\n`,s+=`Report Generated: ${(new Date).toLocaleString()}\n\n`;const l=A.filter(e=>"critical"===e.priority),r=A.filter(e=>"approved"===e.status);s+="SUMMARY:\n",s+=`Total Recommendations: ${A.length}\n`,s+=`Critical Priority: ${l.length}\n`,s+=`Approved Recommendations: ${r.length}\n`,s+=`Implementation Progress: ${U()}%\n\n`,l.length>0&&(s+="CRITICAL PRIORITY RECOMMENDATIONS:\n",l.forEach(e=>{s+=`\n• ${e.title}\n`,s+=`  Category: ${e.category}\n`,s+=`  Status: ${e.status}\n`,s+=`  Expected Benefit: ${e.expectedBenefit}\n`,e.estimatedCost&&(s+=`  Estimated Cost: ${e.estimatedCost}\n`),e.timeframe&&(s+=`  Timeframe: ${e.timeframe}\n`)}),s+="\n"),r.length>0&&(s+="APPROVED RECOMMENDATIONS:\n",r.forEach(e=>{s+=`\n• ${e.title}\n`,s+=`  Priority: ${e.priority}\n`,s+=`  Category: ${e.category}\n`,s+=`  Expected Benefit: ${e.expectedBenefit}\n`,e.assignedTo&&(s+=`  Assigned To: ${e.assignedTo}\n`),e.estimatedCost&&(s+=`  Estimated Cost: ${e.estimatedCost}\n`)}));const n=d.recommendations||d.default;return{mailtoLink:`mailto:${n.join(",")}?subject=${encodeURIComponent(a)}&body=${encodeURIComponent(s)}`,subject:a,body:s,recipients:n}})();window.location.href=e,$(!1),k({type:"success",message:"Email client opened with recommendations report",duration:3e3})},children:[t.jsx(h,{size:16}),"Send Email"]})]})]})}),t.jsx(c,{isOpen:!!R,onClose:()=>I(null),onConfirm:()=>(e=>{const t=A.filter(t=>t.id!==e);D(t),I(null),k({type:"info",message:"Recommendation deleted successfully",duration:3e3})})(R?.id),title:"Delete Recommendation",message:`Are you sure you want to delete "${R?.title}"? This action cannot be undone.`,confirmText:"Delete Recommendation",cancelText:"Cancel",variant:"danger"})]})};export{f as default};
